<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† - Ù…Ù†ØµØ© Ø§Ù„ØªØ§Ø¬Ø± Ø§Ù„Ø°ÙƒÙŠØ©</title>

  <style>
    :root{--brand:#0f4c81;--bg:#f5f7fa;--card:#fff;--text:#111827;--muted:#6b7280;}
    *{box-sizing:border-box}
    body{margin:0;font-family:Arial,system-ui,-apple-system,Segoe UI; background:var(--bg); color:var(--text)}
    header{background:var(--brand); color:#fff; padding:22px 16px; text-align:center}
    nav{background:#0b3a63; display:flex; gap:10px; justify-content:center; padding:10px 12px; flex-wrap:wrap}
    nav a{color:#fff;text-decoration:none;padding:8px 12px;border-radius:8px;opacity:.95}
    nav a:hover{background:rgba(255,255,255,.12)}
    main{max-width:980px; margin:18px auto; padding:0 14px}
    .card{background:var(--card); border-radius:14px; padding:18px; box-shadow:0 6px 18px rgba(0,0,0,.08)}
    label{display:block;margin:10px 0 6px;font-weight:700}
    input,select{width:100%;padding:12px;border-radius:10px;border:1px solid #d1d5db;font-size:16px}
    .row{display:grid; gap:12px; grid-template-columns:1fr}
    .btn{display:inline-block;background:var(--brand);color:#fff;text-decoration:none;padding:12px 16px;border-radius:10px;font-weight:800;border:none;width:100%;font-size:16px; cursor:pointer}
    .btn:disabled{opacity:.7; cursor:not-allowed}
    .muted{color:var(--muted)}
    footer{margin-top:18px; text-align:center; padding:14px; color:var(--muted)}
    .wa-float{
      position:fixed; bottom:18px; left:18px; z-index:9999;
      background:#25D366; color:#fff; padding:12px 16px; border-radius:999px;
      text-decoration:none; font-weight:800; box-shadow:0 8px 22px rgba(0,0,0,.18);
    }
    .msg{margin-top:10px; font-weight:700}
    @media(min-width:820px){ .row{grid-template-columns:1fr 1fr} }
  </style>
</head>

<body>

<header>
  <h1 style="margin:0">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</h1>
  <p style="margin:6px 0 0;opacity:.95">Ø¹Ø¨Ù‘Ø¦ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø³ÙŠØ·Ø© ÙˆÙ†ÙƒÙ…Ù„ Ù…Ø¹Ùƒ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</p>
</header>

<nav>
  <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="pricing.html">Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</a>
  <a href="signup.html">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</a>
  <a href="contact.html">ØªÙˆØ§ØµÙ„</a>
</nav>

<main>
  <section class="card">
    <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·</h2>
    <p class="muted">Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø«Ù… ÙØªØ­ Ù…Ø­Ø§Ø¯Ø«Ø© ÙˆØ§ØªØ³Ø§Ø¨ Ø¨Ø±Ø³Ø§Ù„Ø© Ø¬Ø§Ù‡Ø²Ø©.</p>

    <div class="row">
      <div>
        <label>Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø· *</label>
        <input id="biz" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ø§Ù„Ù… Ø§Ù„ÙØ®Ø§Ù…Ø© Ù„Ù„Ø£Ø«Ø§Ø«" />
      </div>

      <div>
        <label>Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø§Ø·</label>
        <select id="type">
          <option value="Ø£Ø«Ø§Ø«">Ø£Ø«Ø§Ø«</option>
          <option value="Ù…Ø·Ø¹Ù… / ÙƒÙˆÙÙŠ">Ù…Ø·Ø¹Ù… / ÙƒÙˆÙÙŠ</option>
          <option value="Ù…ØºØ³Ù„Ø© / ØµØ§Ù„ÙˆÙ†">Ù…ØºØ³Ù„Ø© / ØµØ§Ù„ÙˆÙ†</option>
          <option value="Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª">Ø³ÙˆØ¨Ø±Ù…Ø§Ø±ÙƒØª</option>
          <option value="Ø¹Ù‚Ø§Ø±Ø§Øª">Ø¹Ù‚Ø§Ø±Ø§Øª</option>
          <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
        </select>
      </div>

      <div>
        <label>Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</label>
        <input id="city" placeholder="Ù…Ø«Ø§Ù„: Ø®Ù…ÙŠØ³ Ù…Ø´ÙŠØ· / Ø£Ø¨Ù‡Ø§" />
      </div>

      <div>
        <label>Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</label>
        <select id="plan">
          <option value="Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© 10 Ø±ÙŠØ§Ù„">Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (10 Ø±ÙŠØ§Ù„)</option>
          <option value="Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© 25 Ø±ÙŠØ§Ù„">Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© (25 Ø±ÙŠØ§Ù„)</option>
          <option value="Ø§Ù„Ø¨Ø±Ùˆ 49 Ø±ÙŠØ§Ù„">Ø§Ù„Ø¨Ø±Ùˆ (49 Ø±ÙŠØ§Ù„)</option>
        </select>
      </div>

      <div>
        <label>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ *</label>
        <input id="email" type="email" placeholder="name@email.com" />
      </div>

      <div>
        <label>Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ (Ø¨Ø¯ÙˆÙ† +) *</label>
        <input id="whatsapp" inputmode="numeric" placeholder="Ù…Ø«Ø§Ù„: 565656570" />
      </div>
    </div>

    <button id="submitBtn" class="btn" onclick="goWhatsApp()">ØªØ³Ø¬ÙŠÙ„ ÙˆÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨</button>
    <div id="signupMsg" class="msg"></div>
  </section>
</main>

<footer>Â© 2026 SaaS Merchant Platform</footer>

<a class="wa-float"
   href="https://wa.me/966565652570?text=Ø­ÙŠØ§Ùƒ%20Ø§Ù„Ù„Ù‡%20ğŸ‘‹%0AØ£Ø¨ØºÙ‰%20Ø£Ø¨Ø¯Ø£%20Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ%20ÙÙŠ%20Ù…Ù†ØµØ©%20Ø§Ù„ØªØ§Ø¬Ø±%20Ø§Ù„Ø°ÙƒÙŠØ©."
   target="_blank">ÙˆØ§ØªØ³Ø§Ø¨</a>

<!-- Supabase JS (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // âœ… 1) Ø¨ÙŠØ§Ù†Ø§Øª Supabase (Ù†ÙØ³ Ø§Ù„Ù„ÙŠ Ø¹Ù†Ø¯Ùƒ)
  const SUPABASE_URL = "https://udsqvnvjktggdtzpoyts.supabase.co";
  const SUPABASE_ANON_KEY = "sb_publishable_myAYYiVNUfEUfkFfnFsbNw_aa5F8mjV";

  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  function setMsg(text, color){
    const el = document.getElementById("signupMsg");
    el.textContent = text;
    el.style.color = color || "#111";
  }

  function normalizeWhatsappToE164(localNumber){
    // ÙŠÙ‚Ø¨Ù„: 565656570 Ø£Ùˆ 0565656570 -> ÙŠØ±Ø¬Ø¹ 966565656570
    let n = (localNumber || "").replace(/\D/g, "");
    if (!n) return "";
    if (n.startsWith("0")) n = n.slice(1);
    if (n.startsWith("966")) return n;
    return "966" + n;
  }

  async function goWhatsApp(){
    const btn = document.getElementById("submitBtn");
    btn.disabled = true;
    btn.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...";

    try {
      const business_name = (document.getElementById("biz").value || "").trim();
      const business_type = (document.getElementById("type").value || "").trim();
      const city = (document.getElementById("city").value || "").trim();
      const plan = (document.getElementById("plan").value || "").trim();
      const email = (document.getElementById("email").value || "").trim();
      const whatsapp_input = (document.getElementById("whatsapp").value || "").trim();
      const whatsapp = normalizeWhatsappToE164(whatsapp_input);

      if (!business_name || !email || !whatsapp_input) {
        setMsg("ÙØ¶Ù„Ø§Ù‹ Ø¹Ø¨Ù‘ÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø· + Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ + Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨.", "crimson");
        btn.disabled = false;
        btn.textContent = "ØªØ³Ø¬ÙŠÙ„ ÙˆÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨";
        return;
      }

      setMsg("ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¢Ù†...", "#333");

      // âœ… 2) Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ§Ø¬Ø± ÙÙŠ Ø¬Ø¯ÙˆÙ„ merchants
      const { error } = await supabase
        .from("merchants")
        .insert([{
          business_name,
          business_type,
          city,
          email,
          whatsapp,
          plan
        }]);

      if (error) {
        console.error(error);
        setMsg("ØµØ§Ø± Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: " + (error.message || "ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"), "crimson");
        btn.disabled = false;
        btn.textContent = "ØªØ³Ø¬ÙŠÙ„ ÙˆÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨";
        return;
      }

      setMsg("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø¬Ø§Ø±ÙŠ ÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨...", "green");

      // âœ… 3) Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ø­ØªØ±Ø§ÙÙŠØ©
      const msg =
`Ø­ÙŠØ§ÙƒÙ… Ø§Ù„Ù„Ù‡ ğŸ‘‹
ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙÙŠ Ù…Ù†ØµØ© Ø§Ù„ØªØ§Ø¬Ø± Ø§Ù„Ø°ÙƒÙŠØ©.

Ø§Ø³Ù… Ø§Ù„Ù†Ø´Ø§Ø·: ${business_name}
Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø§Ø·: ${business_type || "â€”"}
Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${city || "â€”"}
Ø§Ù„Ø¨Ø±ÙŠØ¯: ${email}
Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„: ${whatsapp}
Ø§Ù„Ø¨Ø§Ù‚Ø©: ${plan || "â€”"}

Ø¨Ø§Ù†ØªØ¸Ø§Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ğŸ¤`;

      const url = "https://wa.me/966565652570?text=" + encodeURIComponent(msg);
      window.open(url, "_blank");

    } catch (e) {
      console.error(e);
      setMsg("Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹. Ø¬Ø±Ù‘Ø¨ Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ©.", "crimson");
    } finally {
      btn.disabled = false;
      btn.textContent = "ØªØ³Ø¬ÙŠÙ„ ÙˆÙØªØ­ ÙˆØ§ØªØ³Ø§Ø¨";
    }
  }
</script>

</body>
</html>
